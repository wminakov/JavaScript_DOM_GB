<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>
    <body>
        <p class="super_element">Привет</p>
        <img src="https://placeimg.com/50/50/animals" alt="">
        <img src="https://placeimg.com/50/50/arch" alt="">
        <img src="https://placeimg.com/50/50/nature" alt="">
        <img src="https://placeimg.com/50/50/people" alt="">
        <img src="https://placeimg.com/50/50/tech" alt="">
        <img src="https://placeimg.com/50/50/tech/grayscale" alt="">
        <img src="https://placeimg.com/50/50/tech/sepia" alt="">
        <br>
        <button>Кнопка</button>
        <button class="super_element">Кнопка с классом btn</button>
        <button>Кнопка</button>
        <br>
        <textarea></textarea>
        <br>
        <ul>
            <li>
                <button>Кнопка 1</button>
            </li>
            <li>
                <button>Кнопка 2</button>
            </li>
            <li>
                <button>Кнопка 3</button>
            </li>
            <li>
                <button>Кнопка 4</button>
            </li>
        </ul>
        <script>

        /*1. Необходимо вывести сообщение в консоль "все теги прогрузились", когда все теги будут созданы браузером.*/

        document.addEventListener('DOMContentLoaded', () => {
        console.log('все теги прогрузились.')
        });

        /*2. Необходимо вывести сообщение в консоль "страница загрузилась", когда все ресурсы страницы будут загружены.*/

        window.addEventListener('load', function (e) {
            console.log('Страница загрузилась.');
        });

        //или

        window.onload = () => {
        console.log('Страница загрузилась.')
        };


        /*3. При клике на какой-либо тег на странице в консоль должно выводиться сообщение наподобие:
        - Класс "super_element" присутствует в элементе "p".
        - Сообщение должно определять присутствует или отсутствует класс "super_element"
          у элемента, а также выводить в нижнем регистре верный тег в данной строке, по
          которому был совершен клик.
        - Необходимо использовать делегирование.*/

        document.addEventListener('click', function (e) {
            const presenceOfEl = event.target.classList.contains('super_element')
            ? 'присутствует' : 'отсутствует';
            console.log(`Класс "super_element" ${presenceOfEl} в элементе "${event.target.tagName.toLowerCase()}".`);
        });


        /*4. Сделайте, чтобы при наведении на textarea в консоли появлялось сообщение: "Вы навели на textarea."*/

        const findTextArea = document.querySelector('textarea');

        findTextArea.addEventListener('mouseover', function (e) {
        	console.log('Вы навели на textarea.');
        });

     
        /*5. Необходимо повесить событие клика на тег ul. В обработчике события в консоль необходимо выводить текст, который записан внутри элемента кнопки, по которой был произведен клик. Если клик был не по кнопке, то ничего выводить не нужно. Необходимо использовать делегирование.*/

        const findUl = document.querySelector('ul');
        findUl.addEventListener('click', function (e) {
            const target = event.target.closest('button');
            if (!target) return;
            console.log(target.textContent);              
        });


        // const findUl = document.querySelector('ul');
        // findUl.addEventListener('click', function (e) {
        //     const target = event.target.closest('button');
        //     if (!target) return;
        //     if (!findUl.contains(target)) return;
        //     console.log(target.textContent);              
        // });

        // (Метод Element.closest() возвращает ближайший родительский элемент (или сам элемент), который соответствует заданному CSS-селектору или null, если таковых элементов вообще нет.)

        /*6. Вопрос: Почему в console.log пишется сначала текст из 5 задания и только потом выводится текст из 3 задания, если мы кликаем по кнопкам в ul? Ответ необходимо написать здесь же, под этим комментарием, своими словами.*/

        // В 5 задании по принципу всплытия, когда на элементе (button) происходит событие, обработчики сначала срабатывают на нём, потом на его родителе (ul).
        // В 3 задании  сначала идет погружение от document до целевого элемента, на который мы кликнули, а потом происходит всплытие. 


        // 7. С помощью JS необходимо изменить цвет заднего фона каждого второго тега li.

        //***Первый вариант***

        const findLiElements = document.querySelectorAll('li');
        for (let i = 0; i < findLiElements.length; i++) {
            if (i % 2 !== 0) findLiElements[i].style.backgroundColor = 'red';     
        }

        //***Второй вариант***

        const findEvenLiElements = document.querySelectorAll('li:nth-child(2n)');
        findEvenLiElements.forEach(element => {
            element.style.backgroundColor = 'red';
        });


        
        </script>
    </body>
</html>


